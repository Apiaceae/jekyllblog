---
layout: post
title: 在UBUNTU下自动安装rails运行环境
date: 2009-12-03 23:30:11
comments: true
sharing: true
categories: linux
tags: 
---

<p>if [ &quot;$(whoami)&quot; != &quot;root&quot; ]; then   <br />echo &quot;You need to be root to run this!&quot;    <br />exit 2    <br />fi    <br />VERSION=&quot;1.2&quot;    <br />REEV=&quot;<a href="http://rubyforge.org/frs/download.php/51100/ruby-enterprise-1.8.6-20090201.tar.gz">http://rubyforge.org/frs/download.php/51100/ruby-enterprise-1.8.6-20090201.tar.gz</a>&quot;    <br />REEF=&quot;ruby-enterprise-1.8.6-20090201.tar.gz&quot;    <br />REEFF=${REEF%&quot;.tar.gz&quot;}    <br />PASSENGER=&quot;2.1.2&quot;    <br />export PASSENGER    <br />echo &quot;#####################################&quot;    <br />echo &quot;Welcome, let's get this party rollin'&quot;    <br />echo &quot;#####################################&quot;    <br />echo &quot;Updating Aptitude&quot;    <br />apt-get update    <br />echo &quot;Installing build essentials&quot;    <br />apt-get install build-essential zlib1g-dev libssl-dev wget libreadline5-dev -y    <br />echo &quot;Installing GIT&quot;    <br />apt-get install -y git-core    <br />echo &quot;Installing apache&quot;    <br />apt-get install -y apache2    <br />echo &quot;Installing apache headers&quot;    <br />apt-get install -y apache2-prefork-dev    <br />echo &quot;Installing Ruby Enterprise from following url&quot;    <br />echo $REEV    <br />wget $REEV    <br />if [ -e $REEF ]    <br />then    <br />echo &quot;File downloaded succesful&quot;    <br />else    <br />echo &quot;Error, file wasn't downloaded!&quot;    <br />exit    <br />fi    <br />tar -zxvf $REEF    <br /># possible options perhaps for checker    <br /># --extra rails --no-tcmalloc    <br />if [ -d ./$REEFF ]    <br />then    <br />&#160;&#160;&#160; ./$REEFF/installer --auto /opt/ruby    <br />echo &quot;Dir test&quot;    <br />else    <br />echo &quot;Dir not found, exiting..&quot;    <br />exit    <br />fi    <br />echo &quot;Creating ruby symlinks&quot;    <br />ln -s /opt/ruby/bin/ruby /usr/bin/ruby    <br />ln -s /opt/ruby/bin/gem /usr/bin/gem    <br />ln -s /opt/ruby/bin/rake /usr/bin/rake    <br />ln -s /opt/ruby/bin/rails /usr/bin/rails    <br />echo &quot;Installing other gems&quot;    <br />gem install rails    <br />gem install will_paginate    <br />gem install shoulda    <br />gem install mysql    <br />echo &quot;Installing passenger&quot;    <br />gem install passenger -v=$PASSENGER    <br />echo &quot;Config passenger&quot;    <br />yes '' | /opt/ruby/bin/passenger-install-apache2-module    <br />echo &quot;Copying passenger files&quot;    <br />touch /etc/apache2/mods-available/passenger.load    <br />touch /etc/apache2/mods-available/passenger.conf    <br />echo &quot;LoadModule passenger_module /opt/ruby/lib/ruby/gems/1.8/gems/passenger-$PASSENGER/ext/apache2/mod_passenger.so&quot; &gt;&gt; /etc/apache2/mods-available/passenger.load    <br />echo &quot;PassengerRoot /opt/ruby/lib/ruby/gems/1.8/gems/passenger-$PASSENGER     <br />PassengerRuby /opt/ruby/bin/ruby&quot; &gt;&gt; /etc/apache2/mods-available/passenger.conf    <br />echo &quot;Enabling passenger module&quot;    <br />a2enmod passenger    <br />echo &quot;Reloading apache&quot;    <br />/etc/init.d/apache2 reload    <br />echo &quot;##########################&quot;    <br />echo &quot;# Installation Complete&quot;    <br />echo &quot;##########################&quot;    <br />sleep 2    <br />echo &quot;##########################&quot;    <br />echo &quot;# Installed Ruby Version #&quot;    <br />echo &quot;##########################&quot;    <br />ruby -v    <br />echo &quot;##########################&quot;    <br />echo &quot;# Installed Gems Version #&quot;    <br />echo &quot;##########################&quot;    <br />gem -v    <br />/opt/ruby/bin/passenger-status</p>  <p>转至:http://gist.github.com/37213</p>